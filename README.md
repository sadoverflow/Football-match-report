# Football Match Analytics System

Комплексная система аналитики футбольных матчей на основе SoccerDataAPI.

## Возможности

Система предоставляет полный анализ матчей, включая:

### Базовые метрики
- Статистика матчей (победы, ничьи, поражения)
- Голы за/против, разница голов
- Очки за игру (PPG)
- Позиция в таблице

### Продвинутые метрики
- **xG (Expected Goals)** - ожидаемые голы на основе ударов
- **PPDA (Passes Per Defensive Action)** - интенсивность прессинга
- **Shot Accuracy** - точность ударов
- **Shot Conversion** - конверсия ударов в голы
- **Pass Accuracy** - точность передач
- **Form Score** - взвешенная оценка формы с учетом силы соперников

### Тактический анализ
- Обнаружение тактических конфликтов
- Ключевые тактические битвы
- Анализ стиля игры (владение, прессинг, контратаки)

### Дополнительная информация
- Head-to-head статистика
- Топ бомбардиры и ассистенты
- Отсутствующие игроки (травмы, дисквалификации)
- Match preview (AI-генерированное описание матча)
- Погодные условия
- Коэффициенты букмекеров
- Домашние/гостевые показатели

## Установка

1. Установите зависимости:
```bash
source venv/bin/activate
pip install -r requirements.txt
```

2. Создайте файл `.env` с вашим API ключом:
```
SOCCERDATA_API_KEY=your_api_key_here
```

## Использование

### Анализ конкретного матча

```bash
python main.py <match_id>
```

Например:
```bash
python main.py 531585
```

### Анализ первого предстоящего матча

Если не указать match_id, система автоматически найдет первый предстоящий матч:

```bash
python main.py
```

## Структура отчета

Отчет включает:

1. **Информация о матче** - дата, время, стадион, статус
2. **Match Preview** - AI-описание матча (если доступно)
3. **Head-to-Head** - историческая статистика встреч
4. **Сравнение команд** - все метрики для обеих команд
5. **Домашние/гостевые показатели** - раздельная статистика
6. **Топ игроки** - лучшие бомбардиры и ассистенты
7. **Новости команд** - отсутствующие игроки
8. **Прогнозы** - вероятности исходов и коэффициенты
9. **Тактический анализ** - конфликты и ключевые битвы

## Пример вывода

```
====================================================================================================
COMPREHENSIVE MATCH ANALYSIS REPORT
====================================================================================================

## MATCH INFORMATION
**Fixture:** Arsenal vs Manchester City
**Competition:** Premier League (england)
**Date:** 15/01/2024 | **Time:** 17:30
**Status:** scheduled
**Venue:** Emirates Stadium

## HEAD-TO-HEAD STATISTICS
**Matches Played:** 45
**Arsenal Wins:** 12
**Manchester City Wins:** 20
**Draws:** 13
**Average Goals per Match:** 2.8

## TEAM PERFORMANCE COMPARISON
...
```

## API Endpoints Используемые

- `/matches/` - список матчей
- `/match/` - детали матча
- `/match-preview/` - превью матча
- `/head-to-head/` - статистика встреч
- `/standing/` - таблица лиги
- `/team/` - информация о команде

## Метрики, которые вычисляются

### Атакующие
- xG (Expected Goals)
- Shot Accuracy %
- Shot Conversion %
- Goals per Shot
- Key Passes

### Оборонительные
- PPDA (Press Intensity)
- Tackles, Interceptions, Clearances
- Goals Conceded per Game
- Clean Sheet Rate

### Владение мячом
- Possession %
- Pass Accuracy %
- Passes per Game

### Форма
- Weighted Form Score
- Points per Game
- Recent Form (W/D/L string)
- Home/Away Splits

### Игроки
- Top Scorers
- Top Assisters
- Goal Contributions

## Обработка ошибок

Система включает:
- Retry логику для API запросов
- Обработку отсутствующих данных
- Валидацию всех вычислений
- Безопасное деление (защита от деления на ноль)

## Расширение функционала

Вы можете легко добавить:
- Анализ нескольких матчей одновременно
- Сравнение команд по сезонам
- Экспорт в JSON/CSV
- Визуализацию метрик
- Machine Learning прогнозы

